<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Registro de Chamados</title>
  <link rel="stylesheet" href="style.css?v=1.0.1">
</head>

<body>

  <div class="container">

    <h1>Registro de Chamados</h1>

    <form action="salvar.php" method="POST">

      <div class="form-group">

        <label for="numero">Nº do Chamado</label>
        <input type="text" id="numero" name="numero" placeholder="nº do chamado" required>

      </div>

      <div class="form-group">

        <label for="portal">Portal</label>
        <input type="text" id="portal" name="portal" placeholder="manager, jira ou web posto">

      </div>

      <div class="form-group">

        <label for="dt_abertura">Data de Abertura</label>
        <input type="date" id="dt_abertura" name="dt_abertura" required>

      </div>

      <div class="form-group">

        <label for="dt_conclusao">Data de Conclusão</label>
        <input type="date" id="dt_conclusao" name="dt_conclusao" required>

      </div>

      <div class="form-group full">

        <label for="detalhe">Detalhe da Solicitação</label>
        <textarea id="detalhe" name="descricao" rows="2" placeholder="Resumo breve da solicitação..." required></textarea>

      </div>

      <div class="form-group">

        <label for="cliente">Usuário Solicitante</label>
        <input type="text" id="cliente" name="cliente">

      </div>

      <div class="form-group">

        <label for="analista">Atendente</label>
        <input type="text" id="analista" name="analista">

      </div>

      <div class="form-group">

        <label for="departamento">Departamento</label>
        <input type="text" id="departamento" name="departamento" placeholder="Ex: TI, Suporte">

      </div>

      <div class="form-group">

        <label for="status">Status</label>
        <select name="status" id="status" required>
          <option value="" disabled selected>Selecione</option>
          <option value="Concluído">Concluído</option>
          <option value="Aguardando retorno">Aguardando retorno</option>
          <option value="Encerrado por falta de retorno">Encerrado por falta de retorno</option>
        </select>

      </div>

      <div class="form-group">

        <label for="categoria">Categoria</label>
        <select name="categoria" id="categoria" required>
        <option value="" disabled selected>Selecione a categoria</option>
        <option value="Configuração sistêmica">Configuração sistêmica</option>
        <option value="Erro">Erro</option>
        <option value="Dúvida">Dúvida</option>
        <option value="Solicitação">Solicitação</option>
        <option value="Permissão no sistema">Permissão no sistema</option>
        <option value="Atualização de informação">Atualização de informação</option>
        <option value="Criação/Edição/Atualização cadastro usuários">Criação/Edição/Atualização cadastro usuários</option>
        <option value="Limpeza Sispetro">Limpeza Sispetro</option>
        <option value="Reinicialização de serviços">Reinicialização de serviços</option>
        <option value="Edição/permissão em relatórios e layouts">Edição/permissão em relatórios e layouts</option>
        <option value="Edição/Atualização de Qlik">Edição/Atualização de Qlik</option>
        <option value="Edição/Atualização de Power BI">Edição/Atualização de Power BI</option>
        <option value="Suporte">Suporte ao usuário</option>
        <option value="Esclarecimento de dúvidas">Esclarecimento de dúvidas</option>
        <option value="Habilitação de campo">Habilitação de campo</option>
        </select>

      </div>

      <div class="form-group">

        <label for="link">Link do Chamado</label>
        <input type="url" id="link" name="link" placeholder="https://...">

      </div>

      <div class="form-group full">

        <label for="resolucao">Resumo da Solução</label>
        <textarea id="resolucao" name="resolucao" rows="3" required></textarea>

      </div>

      <div class="form-group full">

        <button type="submit">Salvar Chamado</button>

      </div>

    </form>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('sucesso') === '1') {
        alert('✅ Chamado salvo com sucesso.');
        const form = document.querySelector('form');
        if (form) {
            form.reset();
        }
        history.replaceState(null, "", window.location.pathname);
    }
</script>

</body>
</html>